<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h3>{{ isEditMode ? "Edit Employee" : "Add New Employee" }}</h3>
    </div>
    <div class="card-body">
      <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()">
        <div *ngIf="loading" class="text-center py-4">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>

        <div *ngIf="!loading" class="row g-3">
          <div class="col-md-6">
            <label for="name" class="form-label">First Name</label>
            <input
              type="text"
              class="form-control"
              id="firstname"
              formControlName="firstname"
              [class.is-invalid]="
                submitted && employeeForm.get('firstname')?.errors
              "
            />
            <div
              class="invalid-feedback"
              *ngIf="submitted && employeeForm.get('firstname')?.errors?.['required']"
            >
              First Name is required
            </div>
          </div>

          <div class="col-md-6">
            <label for="lastname" class="form-label">Last Name</label>
            <input
              type="text"
              class="form-control"
              id="lastname"
              formControlName="lastname"
              [class.is-invalid]="
                submitted && employeeForm.get('lastname')?.errors
              "
            />
            <div
              class="invalid-feedback"
              *ngIf="submitted && employeeForm.get('lastname')?.errors?.['required']"
            >
              Last Name is required
            </div>
          </div>

          <div class="col-md-6">
            <label for="email" class="form-label">Email</label>
            <input
              type="email"
              class="form-control"
              id="email"
              formControlName="email"
              [class.is-invalid]="
                submitted && employeeForm.get('email')?.errors
              "
            />
            <div
              class="invalid-feedback"
              *ngIf="submitted && employeeForm.get('email')?.errors?.['required']"
            >
              Email is required
            </div>
            <div
              class="invalid-feedback"
              *ngIf="submitted && employeeForm.get('email')?.errors?.['email']"
            >
              Please enter a valid email
            </div>
          </div>

          <div class="col-md-6">
            <label for="position" class="form-label">Position</label>
            <input
              type="text"
              class="form-control"
              id="position"
              formControlName="position"
              [class.is-invalid]="
                submitted && employeeForm.get('position')?.errors
              "
            />
            <div
              class="invalid-feedback"
              *ngIf="submitted && employeeForm.get('position')?.errors?.['required']"
            >
              Position is required
            </div>
          </div>

          <div class="col-12 mt-4">
            <div class="d-flex justify-content-between">
              <button
                type="button"
                class="btn btn-secondary"
                routerLink="/employees"
              >
                <i class="bi bi-arrow-left me-1"></i> Back
              </button>
              <button
                type="submit"
                class="btn btn-primary"
                [disabled]="loading"
              >
                <i class="bi bi-save me-1"></i>
                {{ isEditMode ? "Update" : "Save" }}
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
